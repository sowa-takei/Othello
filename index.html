<!DOCTYPE html>
<meta http-equiv="content-type" charset="utf-8">
<html>
<head>
<title>JavaScriptでオセロゲームを作る</title>
<style type="text/css">
#field td {
  border: 1px solid black;
  width: 50px;
  height: 50px;
  background-color: green;
  text-align: center;
  vertical-align: middle;
  table-layout: fixed;
  padding: 1px 1px 1px 1px;
  font-size: 33px;
}
</style>

</head>


<body>
<!--盤面-->
<table id="field"></table>
<!--ターンの表示-->
<p id="view-tarn"></p>
<!--初期化ボタン-->
<buuton type="button" id="ban-init" onclick="ban-init()">やり直し</buuton>

<script type="text/javascript">
//初期画面起動時
//初期変数定義

var turn = 0 //ターン1:黒　-1:白

//盤面の状況を二次元入れるで定義
var ban_ar = new Array(8)
for (var x = 0; x < ban_ar.length; x++){
  ban_ar[x] = new Array(8)
}

//HTMLで定義したテーブル取得
var ban = document.getElementById('field')

//取得したテーブルに盤面生成
ban_new()

//盤面を初期化する
ban_init()

//クリックした時に実行されるイベント
for (var x = 0; x < 8; x++){
for (var y = 0; y < 8; y++){
  var select_cell = ban.rows[x].cells[y];
  select_cell.onclick = function() {
  //クリックされた場所に石がない場合は、その場所にターン側の石が置けるかチェックし
  //置ける場合は、盤面を更新。相手ターンへ移る
  if (ban_ar[this.parentNode.rowIndex][this.cellIndex] == 0) {
  if (check_reverse(this.parentNode.rowIndex,this.cellIndex) > 0){
    ban_set()
    cheng_turn()
  }
  }
  }
}
}

//テーブルで盤面を作成する処理
function ban_new() {
  for (var x = 0; x < 8; x++) {
    var tr = document.createElement("tr")
    ban.appendChild(tr)
  for (var y= 0; y < 8; y++) {
    var td = document.createElement("td")
    tr.appendChild(td)
  }
  }
};

// 盤面を初期化する処理
function ban_init () {
// 全てをクリア
  for (var x = 0; x < 8; x++) {
  for (var y = 0; y < 8; y++) {
    ban_ar[x][y] = 0
  }
  }

//初期状態では、真ん中に白黒を配列
    ban_ar[3][3] = -1
    ban_ar[4][3] = 1
    ban_ar[3][4] = 1
    ban_ar[4][4] = -1
    ban_set()

    //ターンも初期化
    turn = 0
    cheng_turn()
 };

 //盤面状況(配列)を実際の盤面へ反映させる処理
 function ban_set() {
   var stone = ""
   for (var x = 0; x < 8; x++){
   for (var y = 0; y < 8; y++){
     switch( ban_ar[x][y] ){
       case 0:
       stone = ""
       break;
       case -1:
         stone = "○"
         break;
         case 1:
           stone = "●"
           break;
     }
     ban.rows[x].cells[y].innerText = stone;

   }
   }
   return true
 };

</script>
</body>
</html>